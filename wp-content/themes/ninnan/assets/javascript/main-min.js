(function(window,document,undefined){var classes=[];var tests=[];var ModernizrProto={_version:"3.5.0",_config:{classPrefix:"",enableClasses:true,enableJSClass:true,usePrefixes:true},_q:[],on:function(test,cb){var self=this;setTimeout(function(){cb(self[test])},0)},addTest:function(name,fn,options){tests.push({name:name,fn:fn,options:options})},addAsyncTest:function(fn){tests.push({name:null,fn:fn})}};var Modernizr=function(){};Modernizr.prototype=ModernizrProto;Modernizr=new Modernizr;function is(obj,type){return typeof obj===type}function testRunner(){var featureNames;var feature;var aliasIdx;var result;var nameIdx;var featureName;var featureNameSplit;for(var featureIdx in tests){if(tests.hasOwnProperty(featureIdx)){featureNames=[];feature=tests[featureIdx];if(feature.name){featureNames.push(feature.name.toLowerCase());if(feature.options&&feature.options.aliases&&feature.options.aliases.length){for(aliasIdx=0;aliasIdx<feature.options.aliases.length;aliasIdx++){featureNames.push(feature.options.aliases[aliasIdx].toLowerCase())}}}result=is(feature.fn,"function")?feature.fn():feature.fn;for(nameIdx=0;nameIdx<featureNames.length;nameIdx++){featureName=featureNames[nameIdx];featureNameSplit=featureName.split(".");if(featureNameSplit.length===1){Modernizr[featureNameSplit[0]]=result}else{if(Modernizr[featureNameSplit[0]]&&!(Modernizr[featureNameSplit[0]]instanceof Boolean)){Modernizr[featureNameSplit[0]]=new Boolean(Modernizr[featureNameSplit[0]])}Modernizr[featureNameSplit[0]][featureNameSplit[1]]=result}classes.push((result?"":"no-")+featureNameSplit.join("-"))}}}}var docElement=document.documentElement;var isSVG=docElement.nodeName.toLowerCase()==="svg";function setClasses(classes){var className=docElement.className;var classPrefix=Modernizr._config.classPrefix||"";if(isSVG){className=className.baseVal}if(Modernizr._config.enableJSClass){var reJS=new RegExp("(^|\\s)"+classPrefix+"no-js(\\s|$)");className=className.replace(reJS,"$1"+classPrefix+"js$2")}if(Modernizr._config.enableClasses){className+=" "+classPrefix+classes.join(" "+classPrefix);if(isSVG){docElement.className.baseVal=className}else{docElement.className=className}}}var prefixes=ModernizrProto._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];ModernizrProto._prefixes=prefixes;function cssToDOM(name){return name.replace(/([a-z])-([a-z])/g,function(str,m1,m2){return m1+m2.toUpperCase()}).replace(/^-/,"")}function createElement(){if(typeof document.createElement!=="function"){return document.createElement(arguments[0])}else if(isSVG){return document.createElementNS.call(document,"http://www.w3.org/2000/svg",arguments[0])}else{return document.createElement.apply(document,arguments)}}function getBody(){var body=document.body;if(!body){body=createElement(isSVG?"svg":"body");body.fake=true}return body}function injectElementWithStyles(rule,callback,nodes,testnames){var mod="modernizr";var style;var ret;var node;var docOverflow;var div=createElement("div");var body=getBody();if(parseInt(nodes,10)){while(nodes--){node=createElement("div");node.id=testnames?testnames[nodes]:mod+(nodes+1);div.appendChild(node)}}style=createElement("style");style.type="text/css";style.id="s"+mod;(!body.fake?div:body).appendChild(style);body.appendChild(div);if(style.styleSheet){style.styleSheet.cssText=rule}else{style.appendChild(document.createTextNode(rule))}div.id=mod;if(body.fake){body.style.background="";body.style.overflow="hidden";docOverflow=docElement.style.overflow;docElement.style.overflow="hidden";docElement.appendChild(body)}ret=callback(div,rule);if(body.fake){body.parentNode.removeChild(body);docElement.style.overflow=docOverflow;docElement.offsetHeight}else{div.parentNode.removeChild(div)}return!!ret}var testStyles=ModernizrProto.testStyles=injectElementWithStyles;Modernizr.addTest("touchevents",function(){var bool;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch){bool=true}else{var query=["@media (",prefixes.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");testStyles(query,function(node){bool=node.offsetTop===9})}return bool});var omPrefixes="Moz O ms Webkit";var cssomPrefixes=ModernizrProto._config.usePrefixes?omPrefixes.split(" "):[];ModernizrProto._cssomPrefixes=cssomPrefixes;var atRule=function(prop){var length=prefixes.length;var cssrule=window.CSSRule;var rule;if(typeof cssrule==="undefined"){return undefined}if(!prop){return false}prop=prop.replace(/^@/,"");rule=prop.replace(/-/g,"_").toUpperCase()+"_RULE";if(rule in cssrule){return"@"+prop}for(var i=0;i<length;i++){var prefix=prefixes[i];var thisRule=prefix.toUpperCase()+"_"+rule;if(thisRule in cssrule){return"@-"+prefix.toLowerCase()+"-"+prop}}return false};ModernizrProto.atRule=atRule;var domPrefixes=ModernizrProto._config.usePrefixes?omPrefixes.toLowerCase().split(" "):[];ModernizrProto._domPrefixes=domPrefixes;function contains(str,substr){return!!~(""+str).indexOf(substr)}function fnBind(fn,that){return function(){return fn.apply(that,arguments)}}function testDOMProps(props,obj,elem){var item;for(var i in props){if(props[i]in obj){if(elem===false){return props[i]}item=obj[props[i]];if(is(item,"function")){return fnBind(item,elem||obj)}return item}}return false}var modElem={elem:createElement("modernizr")};Modernizr._q.push(function(){delete modElem.elem});var mStyle={style:modElem.elem.style};Modernizr._q.unshift(function(){delete mStyle.style});function domToCSS(name){return name.replace(/([A-Z])/g,function(str,m1){return"-"+m1.toLowerCase()}).replace(/^ms-/,"-ms-")}function computedStyle(elem,pseudo,prop){var result;if("getComputedStyle"in window){result=getComputedStyle.call(window,elem,pseudo);var console=window.console;if(result!==null){if(prop){result=result.getPropertyValue(prop)}}else{if(console){var method=console.error?"error":"log";console[method].call(console,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}}else{result=!pseudo&&elem.currentStyle&&elem.currentStyle[prop]}return result}function nativeTestProps(props,value){var i=props.length;if("CSS"in window&&"supports"in window.CSS){while(i--){if(window.CSS.supports(domToCSS(props[i]),value)){return true}}return false}else if("CSSSupportsRule"in window){var conditionText=[];while(i--){conditionText.push("("+domToCSS(props[i])+":"+value+")")}conditionText=conditionText.join(" or ");return injectElementWithStyles("@supports ("+conditionText+") { #modernizr { position: absolute; } }",function(node){return computedStyle(node,null,"position")=="absolute"})}return undefined}function testProps(props,prefixed,value,skipValueTest){skipValueTest=is(skipValueTest,"undefined")?false:skipValueTest;if(!is(value,"undefined")){var result=nativeTestProps(props,value);if(!is(result,"undefined")){return result}}var afterInit,i,propsLength,prop,before;var elems=["modernizr","tspan","samp"];while(!mStyle.style&&elems.length){afterInit=true;mStyle.modElem=createElement(elems.shift());mStyle.style=mStyle.modElem.style}function cleanElems(){if(afterInit){delete mStyle.style;delete mStyle.modElem}}propsLength=props.length;for(i=0;i<propsLength;i++){prop=props[i];before=mStyle.style[prop];if(contains(prop,"-")){prop=cssToDOM(prop)}if(mStyle.style[prop]!==undefined){if(!skipValueTest&&!is(value,"undefined")){try{mStyle.style[prop]=value}catch(e){}if(mStyle.style[prop]!=before){cleanElems();return prefixed=="pfx"?prop:true}}else{cleanElems();return prefixed=="pfx"?prop:true}}}cleanElems();return false}function testPropsAll(prop,prefixed,elem,value,skipValueTest){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+" "+cssomPrefixes.join(ucProp+" ")+ucProp).split(" ");if(is(prefixed,"string")||is(prefixed,"undefined")){return testProps(props,prefixed,value,skipValueTest)}else{props=(prop+" "+domPrefixes.join(ucProp+" ")+ucProp).split(" ");return testDOMProps(props,prefixed,elem)}}ModernizrProto.testAllProps=testPropsAll;var prefixed=ModernizrProto.prefixed=function(prop,obj,elem){if(prop.indexOf("@")===0){return atRule(prop)}if(prop.indexOf("-")!=-1){prop=cssToDOM(prop)}if(!obj){return testPropsAll(prop,"pfx")}else{return testPropsAll(prop,obj,elem)}};Modernizr.addTest("objectfit",!!prefixed("objectFit"),{aliases:["object-fit"]});testRunner();setClasses(classes);delete ModernizrProto.addTest;delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++){Modernizr._q[i]()}window.Modernizr=Modernizr})(window,document);(function(root,blazy){if(typeof define==="function"&&define.amd){define(blazy)}else if(typeof exports==="object"){module.exports=blazy()}else{root.Blazy=blazy()}})(this,function(){"use strict";var _source,_viewport,_isRetina,_supportClosest,_attrSrc="src",_attrSrcset="srcset";return function Blazy(options){if(!document.querySelectorAll){var s=document.createStyleSheet();document.querySelectorAll=function(r,c,i,j,a){a=document.all,c=[],r=r.replace(/\[for\b/gi,"[htmlFor").split(",");for(i=r.length;i--;){s.addRule(r[i],"k:v");for(j=a.length;j--;)a[j].currentStyle.k&&c.push(a[j]);s.removeRule(0)}return c}}var scope=this;var util=scope._util={};util.elements=[];util.destroyed=true;scope.options=options||{};scope.options.error=scope.options.error||false;scope.options.offset=scope.options.offset||100;scope.options.root=scope.options.root||document;scope.options.success=scope.options.success||false;scope.options.selector=scope.options.selector||".b-lazy";scope.options.separator=scope.options.separator||"|";scope.options.containerClass=scope.options.container;scope.options.container=scope.options.containerClass?document.querySelectorAll(scope.options.containerClass):false;scope.options.errorClass=scope.options.errorClass||"b-error";scope.options.breakpoints=scope.options.breakpoints||false;scope.options.loadInvisible=scope.options.loadInvisible||false;scope.options.successClass=scope.options.successClass||"b-loaded";scope.options.validateDelay=scope.options.validateDelay||25;scope.options.saveViewportOffsetDelay=scope.options.saveViewportOffsetDelay||50;scope.options.srcset=scope.options.srcset||"data-srcset";scope.options.src=_source=scope.options.src||"data-src";_supportClosest=Element.prototype.closest;_isRetina=window.devicePixelRatio>1;_viewport={};_viewport.top=0-scope.options.offset;_viewport.left=0-scope.options.offset;scope.revalidate=function(){initialize(scope)};scope.load=function(elements,force){var opt=this.options;if(elements&&elements.length===undefined){loadElement(elements,force,opt)}else{each(elements,function(element){loadElement(element,force,opt)})}};scope.destroy=function(){var util=scope._util;if(scope.options.container){each(scope.options.container,function(object){unbindEvent(object,"scroll",util.validateT)})}unbindEvent(window,"scroll",util.validateT);unbindEvent(window,"resize",util.validateT);unbindEvent(window,"resize",util.saveViewportOffsetT);util.count=0;util.elements.length=0;util.destroyed=true};util.validateT=throttle(function(){validate(scope)},scope.options.validateDelay,scope);util.saveViewportOffsetT=throttle(function(){saveViewportOffset(scope.options.offset)},scope.options.saveViewportOffsetDelay,scope);saveViewportOffset(scope.options.offset);each(scope.options.breakpoints,function(object){if(object.width>=window.screen.width){_source=object.src;return false}});setTimeout(function(){initialize(scope)})};function initialize(self){var util=self._util;util.elements=toArray(self.options);util.count=util.elements.length;if(util.destroyed){util.destroyed=false;if(self.options.container){each(self.options.container,function(object){bindEvent(object,"scroll",util.validateT)})}bindEvent(window,"resize",util.saveViewportOffsetT);bindEvent(window,"resize",util.validateT);bindEvent(window,"scroll",util.validateT)}validate(self)}function validate(self){var util=self._util;for(var i=0;i<util.count;i++){var element=util.elements[i];if(elementInView(element,self.options)||hasClass(element,self.options.successClass)){self.load(element);util.elements.splice(i,1);util.count--;i--}}if(util.count===0){self.destroy()}}function elementInView(ele,options){var rect=ele.getBoundingClientRect();if(options.container&&_supportClosest){var elementContainer=ele.closest(options.containerClass);if(elementContainer){var containerRect=elementContainer.getBoundingClientRect();if(inView(containerRect,_viewport)){var top=containerRect.top-options.offset;var right=containerRect.right+options.offset;var bottom=containerRect.bottom+options.offset;var left=containerRect.left-options.offset;var containerRectWithOffset={top:top>_viewport.top?top:_viewport.top,right:right<_viewport.right?right:_viewport.right,bottom:bottom<_viewport.bottom?bottom:_viewport.bottom,left:left>_viewport.left?left:_viewport.left};return inView(rect,containerRectWithOffset)}else{return false}}}return inView(rect,_viewport)}function inView(rect,viewport){return rect.right>=viewport.left&&rect.bottom>=viewport.top&&rect.left<=viewport.right&&rect.top<=viewport.bottom}function loadElement(ele,force,options){if(!hasClass(ele,options.successClass)&&(force||options.loadInvisible||ele.offsetWidth>0&&ele.offsetHeight>0)){var dataSrc=getAttr(ele,_source)||getAttr(ele,options.src);if(dataSrc){var dataSrcSplitted=dataSrc.split(options.separator);var src=dataSrcSplitted[_isRetina&&dataSrcSplitted.length>1?1:0];var srcset=getAttr(ele,options.srcset);var isImage=equal(ele,"img");var parent=ele.parentNode;var isPicture=parent&&equal(parent,"picture");if(isImage||ele.src===undefined){var img=new Image;var onErrorHandler=function(){if(options.error)options.error(ele,"invalid");addClass(ele,options.errorClass);unbindEvent(img,"error",onErrorHandler);unbindEvent(img,"load",onLoadHandler)};var onLoadHandler=function(){if(isImage){if(!isPicture){handleSources(ele,src,srcset)}}else{ele.style.backgroundImage='url("'+src+'")'}itemLoaded(ele,options);unbindEvent(img,"load",onLoadHandler);unbindEvent(img,"error",onErrorHandler)};if(isPicture){img=ele;each(parent.getElementsByTagName("source"),function(source){handleSource(source,_attrSrcset,options.srcset)})}bindEvent(img,"error",onErrorHandler);bindEvent(img,"load",onLoadHandler);handleSources(img,src,srcset)}else{ele.src=src;itemLoaded(ele,options)}}else{if(equal(ele,"video")){each(ele.getElementsByTagName("source"),function(source){handleSource(source,_attrSrc,options.src)});ele.load();itemLoaded(ele,options)}else{if(options.error)options.error(ele,"missing");addClass(ele,options.errorClass)}}}}function itemLoaded(ele,options){addClass(ele,options.successClass);if(options.success)options.success(ele);removeAttr(ele,options.src);removeAttr(ele,options.srcset);each(options.breakpoints,function(object){removeAttr(ele,object.src)})}function handleSource(ele,attr,dataAttr){var dataSrc=getAttr(ele,dataAttr);if(dataSrc){setAttr(ele,attr,dataSrc);removeAttr(ele,dataAttr)}}function handleSources(ele,src,srcset){if(srcset){setAttr(ele,_attrSrcset,srcset)}ele.src=src}function setAttr(ele,attr,value){ele.setAttribute(attr,value)}function getAttr(ele,attr){return ele.getAttribute(attr)}function removeAttr(ele,attr){ele.removeAttribute(attr)}function equal(ele,str){return ele.nodeName.toLowerCase()===str}function hasClass(ele,className){return(" "+ele.className+" ").indexOf(" "+className+" ")!==-1}function addClass(ele,className){if(!hasClass(ele,className)){ele.className+=" "+className}}function toArray(options){var array=[];var nodelist=options.root.querySelectorAll(options.selector);for(var i=nodelist.length;i--;array.unshift(nodelist[i])){}return array}function saveViewportOffset(offset){_viewport.bottom=(window.innerHeight||document.documentElement.clientHeight)+offset;_viewport.right=(window.innerWidth||document.documentElement.clientWidth)+offset}function bindEvent(ele,type,fn){if(ele.attachEvent){ele.attachEvent&&ele.attachEvent("on"+type,fn)}else{ele.addEventListener(type,fn,{capture:false,passive:true})}}function unbindEvent(ele,type,fn){if(ele.detachEvent){ele.detachEvent&&ele.detachEvent("on"+type,fn)}else{ele.removeEventListener(type,fn,{capture:false,passive:true})}}function each(object,fn){if(object&&fn){var l=object.length;for(var i=0;i<l&&fn(object[i],i)!==false;i++){}}}function throttle(fn,minDelay,scope){var lastCall=0;return function(){var now=+new Date;if(now-lastCall<minDelay){return}lastCall=now;fn.apply(scope,arguments)}}});(function(window){"use strict";var doc=document,win=window;function init($){var defaultSettings={pageClass:"dragend-page",direction:"horizontal",minDragDistance:"40",onSwipeStart:noop,onSwipeEnd:noop,onDragStart:noop,onDrag:noop,onDragEnd:noop,afterInitialize:noop,keyboardNavigation:false,stopPropagation:false,itemsInPage:1,scribe:0,borderBetweenPages:0,duration:300,preventDrag:false},isTouch="ontouchstart"in win,startEvent=isTouch?"touchstart":"mousedown",moveEvent=isTouch?"touchmove":"mousemove",endEvent=isTouch?"touchend":"mouseup",keycodes={37:"left",38:"up",39:"right",40:"down"},errors={pages:"No pages found"},containerStyles={overflow:"hidden",padding:0},supports=function(){var div=doc.createElement("div"),vendors="Khtml Ms O Moz Webkit".split(" "),len=vendors.length;return function(prop){if(prop in div.style)return true;prop=prop.replace(/^[a-z]/,function(val){return val.toUpperCase()});while(len--){if(vendors[len]+prop in div.style){return true}}return false}}(),supportTransform=supports("transform");function noop(){}function falseFn(){return false}function setStyles(element,styles){var property,value;for(property in styles){if(styles.hasOwnProperty(property)){value=styles[property];switch(property){case"height":case"width":case"marginLeft":case"marginTop":value+="px"}element.style[property]=value}}return element}function extend(destination,source){var property;for(property in source){destination[property]=source[property]}return destination}function proxy(fn,context){return function(){return fn.apply(context,Array.prototype.slice.call(arguments))}}function getElementsByClassName(className,root){var elements;if($){elements=$(root).find("."+className)}else{elements=Array.prototype.slice.call(root.getElementsByClassName(className))}return elements}function animate(element,propery,to,speed,callback){var propertyObj={};propertyObj[propery]=to;if($){$(element).animate(propertyObj,speed,callback)}else{setStyles(element,propertyObj)}}function getCoords(event){var touches=event.touches,data=touches&&touches.length?touches:event.changedTouches;return{x:isTouch?data[0].pageX:event.pageX,y:isTouch?data[0].pageY:event.pageY}}function Dragend(container,settings){var defaultSettingsCopy=extend({},defaultSettings);this.settings=extend(defaultSettingsCopy,settings);this.container=container;this.pageContainer=doc.createElement("div");this.scrollBorder={x:0,y:0};this.page=0;this.preventScroll=false;this.pageCssProperties={margin:0};this._onStart=proxy(this._onStart,this);this._onMove=proxy(this._onMove,this);this._onEnd=proxy(this._onEnd,this);this._onKeydown=proxy(this._onKeydown,this);this._sizePages=proxy(this._sizePages,this);this._afterScrollTransform=proxy(this._afterScrollTransform,this);this.pageContainer.innerHTML=container.cloneNode(true).innerHTML;container.innerHTML="";container.appendChild(this.pageContainer);this._scroll=supportTransform?this._scrollWithTransform:this._scrollWithoutTransform;this._animateScroll=supportTransform?this._animateScrollWithTransform:this._animateScrollWithoutTransform;setStyles(container,containerStyles);setTimeout(proxy(function(){this.updateInstance(settings);if(!this.settings.preventDrag){this._observe()}this.settings.afterInitialize.call(this)},this),10)}function addEventListener(container,event,callback){if($){$(container).on(event,callback)}else{container.addEventListener(event,callback,false)}}function removeEventListener(container,event,callback){if($){$(container).off(event,callback)}else{container.removeEventListener(event,callback,false)}}extend(Dragend.prototype,{_checkOverscroll:function(direction,x,y){var coordinates={x:x,y:y,overscroll:true};switch(direction){case"right":if(!this.scrollBorder.x){coordinates.x=Math.round((x-this.scrollBorder.x)/5);return coordinates}break;case"left":if((this.pagesCount-1)*this.pageDimentions.width<=this.scrollBorder.x){coordinates.x=Math.round(-((Math.ceil(this.pagesCount)-1)*(this.pageDimentions.width+this.settings.borderBetweenPages))+x/5);return coordinates}break;case"down":if(!this.scrollBorder.y){coordinates.y=Math.round((y-this.scrollBorder.y)/5);return coordinates}break;case"up":if((this.pagesCount-1)*this.pageDimentions.height<=this.scrollBorder.y){coordinates.y=Math.round(-((Math.ceil(this.pagesCount)-1)*(this.pageDimentions.height+this.settings.borderBetweenPages))+y/5);return coordinates}break}return{x:x-this.scrollBorder.x,y:y-this.scrollBorder.y,overscroll:false}},_observe:function(){addEventListener(this.container,startEvent,this._onStart);this.container.onselectstart=falseFn;this.container.ondragstart=falseFn;if(this.settings.keyboardNavigation){addEventListener(doc.body,"keydown",this._onKeydown)}addEventListener(win,"resize",this._sizePages)},_onStart:function(event){event=event.originalEvent||event;if(this.settings.stopPropagation){event.stopPropagation()}addEventListener(doc.body,moveEvent,this._onMove);addEventListener(doc.body,endEvent,this._onEnd);this.startCoords=getCoords(event);this.settings.onDragStart.call(this,event)},_onMove:function(event){event=event.originalEvent||event;if(event.touches&&event.touches.length>1||event.scale&&event.scale!==1)return;event.preventDefault();if(this.settings.stopPropagation){event.stopPropagation()}var parsedEvent=this._parseEvent(event),coordinates=this._checkOverscroll(parsedEvent.direction,-parsedEvent.distanceX,-parsedEvent.distanceY);this.settings.onDrag.call(this,this.activeElement,parsedEvent,coordinates.overscroll,event);if(!this.preventScroll){this._scroll(coordinates)}},_onEnd:function(event){event=event.originalEvent||event;if(this.settings.stopPropagation){event.stopPropagation()}var parsedEvent=this._parseEvent(event);this.startCoords={x:0,y:0};if(Math.abs(parsedEvent.distanceX)>this.settings.minDragDistance||Math.abs(parsedEvent.distanceY)>this.settings.minDragDistance){this.swipe(parsedEvent.direction)}else if(parsedEvent.distanceX>0||parsedEvent.distanceX>0){this._scrollToPage()}this.settings.onDragEnd.call(this,this.container,this.activeElement,this.page,event);removeEventListener(doc.body,moveEvent,this._onMove);removeEventListener(doc.body,endEvent,this._onEnd)},_parseEvent:function(event){var coords=getCoords(event),x=this.startCoords.x-coords.x,y=this.startCoords.y-coords.y;return this._addDistanceValues(x,y)},_addDistanceValues:function(x,y){var eventData={distanceX:0,distanceY:0};if(this.settings.direction==="horizontal"){eventData.distanceX=x;eventData.direction=x>0?"left":"right"}else{eventData.distanceY=y;eventData.direction=y>0?"up":"down"}return eventData},_onKeydown:function(event){var direction=keycodes[event.keyCode];if(direction){this._scrollToPage(direction)}},_setHorizontalContainerCssValues:function(){extend(this.pageCssProperties,{cssFloat:"left",overflowY:"auto",overflowX:"hidden",padding:0,display:"block"});setStyles(this.pageContainer,{overflow:"hidden",width:(this.pageDimentions.width+this.settings.borderBetweenPages)*this.pagesCount,boxSizing:"content-box","-webkit-backface-visibility":"hidden","-webkit-perspective":1e3,margin:0,padding:0})},_setVerticalContainerCssValues:function(){extend(this.pageCssProperties,{overflow:"hidden",padding:0,display:"block"});setStyles(this.pageContainer,{"padding-bottom":this.settings.scribe,boxSizing:"content-box","-webkit-backface-visibility":"hidden","-webkit-perspective":1e3,margin:0})},setContainerCssValues:function(){if(this.settings.direction==="horizontal"){this._setHorizontalContainerCssValues()}else{this._setVerticalContainerCssValues()}},_setPageDimentions:function(){var width=this.container.offsetWidth,height=this.container.offsetHeight;if(this.settings.direction==="horizontal"){width=width-parseInt(this.settings.scribe,10)}else{height=height-parseInt(this.settings.scribe,10)}this.pageDimentions={width:width,height:height}},_sizePages:function(){var pagesCount=this.pages.length;this._setPageDimentions();this.setContainerCssValues();if(this.settings.direction==="horizontal"){extend(this.pageCssProperties,{height:this.pageDimentions.height,width:this.pageDimentions.width/this.settings.itemsInPage})}else{extend(this.pageCssProperties,{height:this.pageDimentions.height/this.settings.itemsInPage,width:this.pageDimentions.width})}for(var i=0;i<pagesCount;i++){setStyles(this.pages[i],this.pageCssProperties)}this._jumpToPage("page",this.page)},_calcNewPage:function(direction,pageNumber){var borderBetweenPages=this.settings.borderBetweenPages,height=this.pageDimentions.height,width=this.pageDimentions.width,page=this.page;switch(direction){case"up":if(page<this.pagesCount-1){this.scrollBorder.y=this.scrollBorder.y+height+borderBetweenPages;this.page++}break;case"down":if(page>0){this.scrollBorder.y=this.scrollBorder.y-height-borderBetweenPages;this.page--}break;case"left":if(page<this.pagesCount-1){this.scrollBorder.x=this.scrollBorder.x+width+borderBetweenPages;this.page++}break;case"right":if(page>0){this.scrollBorder.x=this.scrollBorder.x-width-borderBetweenPages;this.page--}break;case"page":switch(this.settings.direction){case"horizontal":this.scrollBorder.x=(width+borderBetweenPages)*pageNumber;break;case"vertical":this.scrollBorder.y=(height+borderBetweenPages)*pageNumber;break}this.page=pageNumber;break;default:this.scrollBorder.y=0;this.scrollBorder.x=0;this.page=0;break}},_onSwipeEnd:function(){this.preventScroll=false;this.activeElement=this.pages[this.page*this.settings.itemsInPage];this.settings.onSwipeEnd.call(this,this.container,this.activeElement,this.page)},_jumpToPage:function(options,pageNumber){if(options){this._calcNewPage(options,pageNumber)}this._scroll({x:-this.scrollBorder.x,y:-this.scrollBorder.y})},_scrollToPage:function(options,pageNumber){this.preventScroll=true;if(options)this._calcNewPage(options,pageNumber);this._animateScroll()},_scrollWithTransform:function(coordinates){var style=this.settings.direction==="horizontal"?"translateX("+coordinates.x+"px)":"translateY("+coordinates.y+"px)";setStyles(this.pageContainer,{"-webkit-transform":style,"-moz-transform":style,"-ms-transform":style,"-o-transform":style,transform:style})},_animateScrollWithTransform:function(){var style="transform "+this.settings.duration+"ms ease-out",container=this.container,afterScrollTransform=this._afterScrollTransform;setStyles(this.pageContainer,{"-webkit-transition":"-webkit-"+style,"-moz-transition":"-moz-"+style,"-ms-transition":"-ms-"+style,"-o-transition":"-o-"+style,transition:style});this._scroll({x:-this.scrollBorder.x,y:-this.scrollBorder.y});addEventListener(this.container,"webkitTransitionEnd",afterScrollTransform);addEventListener(this.container,"oTransitionEnd",afterScrollTransform);addEventListener(this.container,"transitionend",afterScrollTransform);addEventListener(this.container,"transitionEnd",afterScrollTransform)},_afterScrollTransform:function(){var container=this.container,afterScrollTransform=this._afterScrollTransform;this._onSwipeEnd();removeEventListener(container,"webkitTransitionEnd",afterScrollTransform);removeEventListener(container,"oTransitionEnd",afterScrollTransform);removeEventListener(container,"transitionend",afterScrollTransform);removeEventListener(container,"transitionEnd",afterScrollTransform);setStyles(this.pageContainer,{"-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"",transition:""})},_scrollWithoutTransform:function(coordinates){var styles=this.settings.direction==="horizontal"?{marginLeft:coordinates.x}:{marginTop:coordinates.y};setStyles(this.pageContainer,styles)},_animateScrollWithoutTransform:function(){var property=this.settings.direction==="horizontal"?"marginLeft":"marginTop",value=this.settings.direction==="horizontal"?-this.scrollBorder.x:-this.scrollBorder.y;animate(this.pageContainer,property,value,this.settings.duration,proxy(this._onSwipeEnd,this))},swipe:function(direction){this.settings.onSwipeStart.call(this,this.container,this.activeElement,this.page);this._scrollToPage(direction)},updateInstance:function(settings){settings=settings||{};if(typeof settings==="object")extend(this.settings,settings);this.pages=getElementsByClassName(this.settings.pageClass,this.pageContainer);if(this.pages.length){this.pagesCount=this.pages.length/this.settings.itemsInPage}else{throw new Error(errors.pages)}this.activeElement=this.pages[this.page*this.settings.itemsInPage];this._sizePages();if(this.settings.jumpToPage){this.jumpToPage(settings.jumpToPage);delete this.settings.jumpToPage}if(this.settings.scrollToPage){this.scrollToPage(this.settings.scrollToPage);delete this.settings.scrollToPage}if(this.settings.destroy){this.destroy();delete this.settings.destroy}},destroy:function(){var container=this.container;removeEventListener(container,startEvent);removeEventListener(container,moveEvent);removeEventListener(container,endEvent);removeEventListener(doc.body,"keydown",this._onKeydown);removeEventListener(win,"resize",this._sizePages);container.removeAttribute("style");for(var i=0;i<this.pages.length;i++){this.pages[i].removeAttribute("style")}container.innerHTML=this.pageContainer.innerHTML},scrollToPage:function(page){this._scrollToPage("page",page-1)},jumpToPage:function(page){this._jumpToPage("page",page-1)}});if($){$.fn.dragend=function(settings){settings=settings||{};this.each(function(){var instance=$(this).data("dragend");if(instance){instance.updateInstance(settings)}else{instance=new Dragend(this,settings);$(this).data("dragend",instance)}if(typeof settings==="string")instance.swipe(settings)});return this}}return Dragend}if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return init(win.jQuery||win.Zepto)})}else{win.Dragend=init(win.jQuery||win.Zepto)}})(window);!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Macy=e()}(this,function(){"use strict";function t(t){var e=document.body.clientWidth,o=void 0;for(var n in t.breakAt)if(e<n){o=t.breakAt[n];break}return o||(o=t.columns),o}function e(e){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t(e),r=void 0,i=100/n;return o?1===n?"100%":(r=(n-1)*e.margin/n,"calc("+i+"% - "+r+"px)"):i}function o(o,n){var r=t(o.options),i=0,s=void 0;return 1===++n?0:(s=(o.options.margin-(r-1)*o.options.margin/r)*(n-1),i+=e(o.options,!1)*(n-1),"calc("+i+"% + "+s+"px)")}function n(t){for(var e=0,o=t.container,n=t.rows,r=n.length-1;r>=0;r--)e=n[r]>e?n[r]:e;o.style.height=e+"px"}function r(e,o){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];l(e,t(e.options),r),o.forEach(function(t){var o=0,n=parseInt(t.offsetHeight,10);isNaN(n)||(e.rows.forEach(function(t,n){t<e.rows[o]&&(o=n)}),t.style.position="absolute",t.style.top=e.rows[o]+"px",t.style.left=""+e.cols[o],e.rows[o]+=isNaN(n)?0:n+e.options.margin,i&&(t.dataset.macyComplete=1))}),i&&(e.tmpRows=null),n(e)}function i(e,o){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=t(e.options);l(e,s,r),o.forEach(function(t){e.lastcol===s&&(e.lastcol=0);var o=c(t,"height");o=parseInt(o.replace("px",""),10),isNaN(o)||(t.style.position="absolute",t.style.top=e.rows[e.lastcol]+"px",t.style.left=""+e.cols[e.lastcol],e.rows[e.lastcol]+=isNaN(o)?0:o+e.options.margin,e.lastcol+=1,i&&(t.dataset.macyComplete=1))}),i&&(e.tmpRows=null),n(e)}function s(t,e){var o=void 0;return function(){o&&clearTimeout(o),o=setTimeout(t,e)}}Object.getOwnPropertyNames(Array.prototype).forEach(function(t){"length"!==t&&(NodeList.prototype[t]=Array.prototype[t],HTMLCollection.prototype[t]=Array.prototype[t])});var a=function t(e,o){if(!(this instanceof t))return new t(e,o);if(e=e.replace(/^\s*/,"").replace(/\s*$/,""),o)return this.byCss(e,o);for(var n in this.selectors)if(o=n.split("/"),new RegExp(o[1],o[2]).test(e))return this.selectors[n](e);return this.byCss(e)};a.prototype.byCss=function(t,e){return(e||document).querySelectorAll(t)},a.prototype.selectors={},a.prototype.selectors[/^\.[\w\-]+$/]=function(t){return document.getElementsByClassName(t.substring(1))},a.prototype.selectors[/^\w+$/]=function(t){return document.getElementsByTagName(t)},a.prototype.selectors[/^\#[\w\-]+$/]=function(t){return document.getElementById(t.substring(1))};var c=function(t,e){return window.getComputedStyle(t,null).getPropertyValue(e)},l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.lastcol||(t.lastcol=0),n){t.rows=[],t.cols=[],t.lastcol=0;for(var r=e-1;r>=0;r--)t.rows[r]=0,t.cols[r]=o(t,r)}if(t.tmpRows){t.rows=[];for(var r=e-1;r>=0;r--)t.rows[r]=t.tmpRows[r]}else{t.tmpRows=[];for(var r=e-1;r>=0;r--)t.tmpRows[r]=t.rows[r]}},u=function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=o?t.container.children:a(':scope > *:not([data-macy-complete="1"])',t.container),c=e(t.options);return s.forEach(function(t){o&&(t.dataset.macyComplete=0),t.style.width=c}),t.options.trueOrder?i(t,s,o,n):r(t,s,o,n)},p=function(t,e){setTimeout(function(){var o=t();e&&e(o)},0)},f=function(t,e,o){t&&p(t),o.req===o.complete&&p(e)},h=function(t,e,o){var n=t.length,r=0;t.forEach(function(t){t.complete&&(r++,f(e,o,{req:n,complete:r})),t.addEventListener("load",function(){r++,f(e,o,{req:n,complete:r})})})},d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},m={columns:4,margin:2,trueOrder:!0,waitForImages:!1},v=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;if(!(this instanceof t))return new t(e);if(this.options={},d(this.options,m,e),this.container=a(e.container),this.container instanceof a||!this.container)return!!e.debug&&console.error("Error: Container not found");delete this.options.container,this.container.length&&(this.container=this.container[0]),this.container.style.position="relative",this.rows=[];var o=this.recalculate.bind(this,!1,!1),n=this.recalculate.bind(this,!0,!0),r=a("img",this.container);if(this.resizer=s(function(){n()},100),window.addEventListener("resize",this.resizer),e.waitForImages)return h(r,null,n);this.recalculate(!0,!1),h(r,o,n)};return v.init=function(t){return console.warn("Depreciated: Macy.init will be removed in v3.0.0 opt to use Macy directly like so Macy({ /*options here*/ }) "),new v(t)},v.prototype.recalculateOnImageLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=a("img",this.container),n=this.recalculate.bind(this,e,!1),r=this.recalculate.bind(this,e,!0);return t?h(o,null,r):(n(),h(o,n,r))},v.prototype.runOnImageLoad=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=a("img",this.container);return e?h(o,t,t):h(o,null,t)},v.prototype.recalculate=function(){return u(this,arguments.length>0&&void 0!==arguments[0]&&arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])},v.prototype.remove=function(){window.removeEventListener("resize",this.resizer),this.container.children.forEach(function(t){t.removeAttribute("data-macy-complete"),t.removeAttribute("style")}),this.container.removeAttribute("style")},v.prototype.reInit=function(){this.recalculate(!0,!0),window.addEventListener("resize",this.resizer)},v});(function(window){function init(){var doc=window.document;var viewportWidth=Math.max(doc.documentElement.clientWidth,window.innerWidth||0);var viewportHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var navEl=doc.querySelector(".js-nav");var navLinks=navEl.querySelectorAll("a");var navToggleButton=doc.querySelector(".js-navToggle");var navCloseButton=doc.querySelector(".js-navClose");var activeClass="is-active";function toggleNav(state){state=state||!navEl.classList.contains(activeClass);navEl.classList.toggle(activeClass,state);navEl.setAttribute("aria-expanded",!state)}if(navEl){navToggleButton.addEventListener("click",function(e){toggleNav()});navCloseButton.addEventListener("click",function(e){toggleNav(false)});Array.from(navLinks,function(navLink){navLink.addEventListener("click",function(e){toggleNav(false)})})}var slideshows=[];var bLazy=new Blazy({offset:viewportHeight,selector:".js-lazy",successClass:"is-loaded",errorClass:"is-error",success:function(imageEl){var slideshow=imageEl.getAttribute("data-slideshow");if(slideshow){var slideshowEl=document.getElementById(imageEl.getAttribute("data-slideshow"));var slides=parseInt(slideshowEl.getAttribute("data-slides"));var loaded=parseInt(slideshowEl.getAttribute("data-loaded"));slideshowEl.setAttribute("data-loaded",loaded+1);if(loaded>0&&slides===loaded+1){slideshows.push(new Dragend(slideshowEl))}}}});bLazy.load();var macyEl=doc.querySelector(".js-masonry");if(macyEl){Macy({columns:3,container:macyEl.getAttribute("data-container"),trueOrder:false,margin:Math.round(viewportWidth*.05),waitForImages:true,breakAt:{1e3:2,600:1}})}}init()})(this);